{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// import axios from 'axios'\nimport subInfo from '@/components/subInfo.vue';\nimport getMyURLs from '@/commons/getMyURLs';\nimport axios from 'axios';\nexport default {\n  components: {\n    subInfo\n  },\n  mounted() {\n    setTimeout(() => {\n      this.show = true;\n    }, 0);\n    this.getURLs();\n  },\n  data() {\n    return {\n      show: true,\n      searchName: '',\n      searchType: '',\n      gridData: [],\n      allData: [],\n      source: \"record\",\n      options: [{\n        value: 'pic',\n        label: '图片'\n      }, {\n        value: 'txt',\n        label: '文本'\n      }, {\n        value: '',\n        label: '全部'\n      }]\n    };\n  },\n  watch: {\n    searchName(newValue) {\n      this.filterData(newValue);\n    },\n    searchType(newValue2) {\n      this.filterData(newValue2);\n    }\n  },\n  methods: {\n    logOut() {\n      this.$store.dispatch('logout');\n      if (this.$route.path !== '/intro') {\n        setTimeout(() => {\n          this.$router.push('/intro');\n        }, 100);\n      }\n    },\n    async filterData() {\n      console.log('searchName', this.searchName);\n      console.log('searchType', this.searchType);\n      if (this.searchName || this.searchType) {\n        console.log('searchType', this.searchType);\n        try {\n          const responses = await Promise.all(this.allData.map(async item => {\n            try {\n              return await axios.get(item);\n            } catch (error) {\n              console.error(`从 ${item} 获取数据时出错:`, error);\n              return null;\n            }\n          }));\n          this.gridData = responses.filter(response => {\n            if (!response) return false; // 过滤掉返回 null 的情况\n            const name = response.data.name;\n            const type = response.data.type; // 假设响应中包含类型信息\n\n            const nameMatches = this.searchName ? name && name.toLowerCase().includes(this.searchName.toLowerCase()) : true;\n            const typeMatches = this.searchType ? type && type.toLowerCase().includes(this.searchType.toLowerCase()) : true;\n\n            // 同时满足名称和类型条件\n            return nameMatches && typeMatches;\n          }).map(response => response.config.url);\n          console.log('filteredData', this.gridData);\n        } catch (error) {\n          console.error('处理 Promise.all 操作时出错:', error);\n        }\n      } else {\n        this.gridData = this.allData; // 没有搜索条件时，显示全部数据\n      }\n    },\n    async getURLs() {\n      try {\n        this.allData = await getMyURLs();\n        // print(\"hi\",this.allData)\n        this.gridData = this.allData;\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  }\n};","map":{"version":3,"names":["subInfo","getMyURLs","axios","components","mounted","setTimeout","show","getURLs","data","searchName","searchType","gridData","allData","source","options","value","label","watch","newValue","filterData","newValue2","methods","logOut","$store","dispatch","$route","path","$router","push","console","log","responses","Promise","all","map","item","get","error","filter","response","name","type","nameMatches","toLowerCase","includes","typeMatches","config","url","e"],"sources":["src/components/recordWorks.vue"],"sourcesContent":["<template>\n<div class=\"container\">\n    <transition name=\"el-fade-in-linear\">\n        <div class=\"content\" v-show=\"show\">\n            <nav class=\"home-navbar\">\n                <div class=\"home-navbar-container\">\n                    <div class=\"want-to-be-left\">\n                        <a class=\"home-navbar-logo\">\n                            <img src=\"../assets/logo.png\" alt=\"Logo\" class=\"home-logo-image\">\n                        </a>\n                        <div class=\"page-titile\">\n                            <h3></h3>\n                        </div>\n                    </div>\n                    <div class=\"want-to-be-right\">\n                        <ul class=\"home-navbar-menu\">\n                            <li class=\"guide-item\"><a href=\"#/guidePage\">用户指南</a></li>\n                            <li class=\"recharge-item\"><a href=\"#/myGas\">燃料管理</a></li>\n                            <li class=\"intro-item\"><a href=\"#/blockBrowse\">区块浏览器</a></li>\n                            <li class=\"explore-item\"><a href=\"#/exhibitWorks\">交易市场</a></li>\n                            <li class=\"upload-item\"><a href=\"#/uploadWorks\">凭证上传</a></li>\n                            <li class=\"records-item active\"><a href=\"#/recordWorks\">我的凭证</a></li>\n                            <li class=\"home-item\"><a href=\"#/home\">个人中心</a></li>\n                        </ul>\n                        <div>\n                            <button class=\"home-navbar-button\" @click=\"logOut\">退出登录</button>\n                        </div>\n                        <div class=\"home-navbar-profile\">\n                            <a href=\"https://github.com/Psalm404/Hellometa\" target=\"_blank\">\n                                <img src=\"../assets/github.jpg\" alt=\"Join us\">\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </nav>\n            <div class=\"display-container\">\n                <div class=\"profile-title\">\n                    <h2>Records</h2>\n                </div>\n                <div class=\"search-box\">\n                    <i class=\"el-icon-search\" style=\"font-size: large; line-height:33px;\"></i>\n                    <el-input class=\"search-by-name\" placeholder=\"按名称搜索\" v-model=\"searchName\" size=\"small\"></el-input>\n                    <el-select style=\"width:200px; \" size=\"small\" v-model=\"searchType\" placeholder=\"按类型搜索\">\n                        <el-option v-for=\"item in options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\n                    </el-select>\n                </div>\n            </div>\n            <div class=\"grid-box\">\n                <div v-for=\"(item, index) in gridData\" :key=\"index\" class=\"grid-item\">\n                    <subInfo :fileURL=\"item\" :source=\"source\"/>\n                </div>\n            </div>\n        </div>\n    </transition>\n</div>\n</template>\n\n<script>\n// import axios from 'axios'\nimport subInfo from '@/components/subInfo.vue'\nimport getMyURLs from '@/commons/getMyURLs';\nimport axios from 'axios';\nexport default {\n    components: {\n        subInfo\n    },\n    mounted() {\n        setTimeout(() => {\n            this.show = true;\n        }, 0)\n        this.getURLs()\n    },\n    data() {\n        return {\n            show: true,\n            searchName: '',\n            searchType: '',\n            gridData: [],\n            allData:[],\n            source:\"record\",\n            options: [{\n                    value: 'pic',\n                    label: '图片'\n                }, {\n                    value: 'txt',\n                    label: '文本'\n                },\n                {\n                    value: '',\n                    label: '全部'\n                }\n            ]\n        };\n    },\n    watch: {\n        searchName(newValue) {\n            this.filterData(newValue);\n        },\n        searchType(newValue2) {\n            this.filterData(newValue2);\n        },\n    },\n    methods: {\n        logOut() {\n            this.$store.dispatch('logout');\n            if (this.$route.path !== '/intro') {\n                setTimeout(() => {\n                    this.$router.push('/intro');\n                }, 100);\n            }\n        },\n        async filterData() {\n            console.log('searchName', this.searchName);\n            console.log('searchType', this.searchType);\n\n            if (this.searchName || this.searchType) {\n                console.log('searchType', this.searchType)\n                try {\n                    const responses = await Promise.all(this.allData.map(async item => {\n                        try {\n                            return await axios.get(item);\n                        } catch (error) {\n                            console.error(`从 ${item} 获取数据时出错:`, error);\n                            return null;\n                        }\n                    }));\n\n                    this.gridData = responses.filter(response => {\n                        if (!response) return false; // 过滤掉返回 null 的情况\n                        const name = response.data.name;\n                        const type = response.data.type; // 假设响应中包含类型信息\n\n                        const nameMatches = this.searchName ?\n                            name && name.toLowerCase().includes(this.searchName.toLowerCase()) :\n                            true;\n\n                        const typeMatches = this.searchType ?\n                            type && type.toLowerCase().includes(this.searchType.toLowerCase()) :\n                            true;\n\n                        // 同时满足名称和类型条件\n                        return nameMatches && typeMatches;\n                    }).map(response => response.config.url);\n\n                    console.log('filteredData', this.gridData);\n                } catch (error) {\n                    console.error('处理 Promise.all 操作时出错:', error);\n                }\n            } else {\n                this.gridData = this.allData; // 没有搜索条件时，显示全部数据\n            }\n        },\n        async getURLs() {\n            try {\n                this.allData = await getMyURLs();\n                // print(\"hi\",this.allData)\n                this.gridData = this.allData;\n            } catch (e) {\n                console.log(e)\n            }\n        }\n    }\n};\n</script>\n\n<style scoped>\n.container {\n    width: 100%;\n    height: auto;\n    max-height:100%;\n    /* display: flex;\n    flex-direction: column;\n    max-height: 100vh;\n    overflow: hidden;\n    position: relative; */\n}\n\n.content {\n    max-width: 100%;\n    width: 100%;\n    margin: 0 auto;\n    /* width: 100%;\n    height: 100%;\n    margin-left: 10%;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    overflow: auto; */\n}\n\n.cool-text {\n    position: absolute;\n    z-index: 0;\n    font-size: 4.5em;\n    top: 0;\n    left: 75px;\n    color: rgba(255, 87, 51, 0.8);\n}\n\n.home-navbar {\n    margin-top: 20px;\n    margin-left: calc(50% - 48vw);\n    background-color: rgba(255, 255, 255, 0.6); /* 设置为半透明 */\n    border-bottom: 1px solid rgba(230, 232, 236, 0); /* 去掉底部边框 */\n    padding: 10px 20px;\n    position: fixed;\n    top: 0;\n    width: 90%;\n    height: auto;\n    z-index: 1000;\n    border-radius: 25px; /* 设置圆角 */\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* 添加阴影效果 */\n    backdrop-filter: blur(30px); /* 添加背景模糊效果 */\n}\n\n/* Recharge */\n.guide-item {\n    position: relative;\n    top: 10px;\n    /* 根据需要调整位置 */\n    left: -110px;\n    /* 根据需要调整位置 */\n}\n\n\n/* Recharge */\n.recharge-item {\n    position: relative;\n    top: 10px; /* 根据需要调整位置 */\n    left: -100px; /* 根据需要调整位置 */\n}\n\n/* Browser */\n.intro-item {\n    position: relative;\n    top: 10px; /* 根据需要调整位置 */\n    left: -90px; /* 根据需要调整位置 */\n}\n\n/* Explore */\n.explore-item {\n    position: relative;\n    top: 10px; /* 根据需要调整位置 */\n    left: -80px; /* 根据需要调整位置 */\n}\n\n/* Upload */\n.upload-item {\n    position: relative;\n    top: 10px; /* 根据需要调整位置 */\n    left: -70px; /* 根据需要调整位置 */\n}\n\n/* Records */\n.records-item {\n    position: relative;\n    top: 10px; /* 根据需要调整位置 */\n    left: -60px; /* 根据需要调整位置 */\n}\n\n/* Home */\n.home-item {\n    position: relative;\n    top: 10px; /* 根据需要调整位置 */\n    left: -50px; /* 根据需要调整位置 */\n}\n\n.home-navbar-container {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin: 0 auto;\n}\n\n.want-to-be-left {\n    display: flex;\n    justify-content: flex-start; /* 左对齐 */\n    align-items: center;\n    flex-grow: 1; /* 使其占据剩余空间 */\n}\n\n.want-to-be-right {\n    display: flex;\n    justify-content: space-evenly;\n}\n\n.home-navbar-logo-container {\n    display: flex;\n    align-items: center;\n}\n\n.home-navbar-logo {\n    font-size: 2px;\n    font-weight: bold;\n    color: #333;\n    text-decoration: none;\n}\n\n.home-logo-image {\n    height: 40px;\n    margin-right: 10px;\n}\n\n.home-navbar-title {\n    margin: 0;\n    padding: 0;\n}\n\n.home-navbar-menu li {\n    margin: 0 15px;\n}\n\n.home-navbar-menu {\n    list-style: none;\n    display: flex;\n    margin: 0;\n    padding: 0;\n}\n\n.home-navbar-menu li a {\n    color: #4d3535;\n    text-decoration: none;\n    font-size: 18px;\n    font-weight: bold;\n    transition: color 0.3s;\n}\n\n.home-navbar-menu li.active a {\n    font-size: 18px;\n    color:  #ff5900;\n}\n\n.home-navbar-menu li a:hover {\n    color:  #ff5900;\n}\n\n.home-navbar-actions {\n    display: flex;\n    align-items: center;\n}\n\n.home-navbar-button {\n    background-color: rgba(255, 255, 255, 0.6); /* 设置为半透明 */\n    color: #4d3535;\n    border: 1px solid #4d3535; /* 添加2px的边框，颜色与原背景色一致 */\n    padding: 10px 10px;\n    border-radius: 20px; /* 设置圆角 */\n    cursor: pointer;\n    transition: background-color 0.3s, border-color 0.3s; /* 添加边框颜色过渡 */\n    margin-right: 10px; /* 增加一个右边距 */\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* 添加阴影效果 */\n    backdrop-filter: blur(30px); /* 添加背景模糊效果 */\n}\n\n.home-navbar-button:hover {\n    background-color: #ff5900;\n    border-color: #ff5900; /* 修改hover状态下的边框颜色 */\n}\n\n.home-navbar-profile img {\n    width: 35px;\n    height: 35px;\n    border-radius: 50%;\n    cursor: pointer;\n}\n\n.profile-titile{\n    z-index: 00; /* 设置一个较高的 z-index 使其在页面顶层 */\n}\n\nh2 {\n    position: relative;\n    left: 12%;\n    top: 23px;\n    font-size: 6em;\n    color:  #c64500;\n    text-align: center;\n}\n\n/* 新增的样式 */\n.display-container {\n    display: flex;\n    align-items: center; /* 垂直居中对齐 */\n    justify-content: space-between; /* 在两端对齐 */\n    margin-top: 70px; /* 根据需要调整间距 */\n    padding: 0 15px; /* 根据需要调整内边距 */\n}\n\n\n.search-box {\n    position: relative;\n    top:0%;\n    left: -28%;\n    z-index: 10;\n    text-align: left;\n    color: #9c9c9c;\n    padding: 10px 15px;\n    width: 500px;\n    box-shadow: 2px 4px 15px #171717;\n    background-color: rgb(48, 48, 48);\n    border-radius: 5px;\n    margin: 0px 60px;\n    margin-left: 10%;\n    display: flex;\n    gap: 15px;\n}\n\n.grid-box {\n    z-index: 1;\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    gap: 25px;\n    margin: 20px 60px;\n}\n\n.grid-item {\n    color: white;\n    background-color: rgb(48, 48, 48);\n    height: 330px;\n    text-align: center;\n    border-radius: 7px;\n    box-shadow: 2px 4px 15px #171717;\n    display: flex;\n    flex-direction: column;\n    border: 1px solid #ccc; /* 添加灰白色边框 */\n}\n\n</style>\n"],"mappings":";AA0DA;AACA,OAAAA,OAAA;AACA,OAAAC,SAAA;AACA,OAAAC,KAAA;AACA;EACAC,UAAA;IACAH;EACA;EACAI,QAAA;IACAC,UAAA;MACA,KAAAC,IAAA;IACA;IACA,KAAAC,OAAA;EACA;EACAC,KAAA;IACA;MACAF,IAAA;MACAG,UAAA;MACAC,UAAA;MACAC,QAAA;MACAC,OAAA;MACAC,MAAA;MACAC,OAAA;QACAC,KAAA;QACAC,KAAA;MACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA;IAEA;EACA;EACAC,KAAA;IACAR,WAAAS,QAAA;MACA,KAAAC,UAAA,CAAAD,QAAA;IACA;IACAR,WAAAU,SAAA;MACA,KAAAD,UAAA,CAAAC,SAAA;IACA;EACA;EACAC,OAAA;IACAC,OAAA;MACA,KAAAC,MAAA,CAAAC,QAAA;MACA,SAAAC,MAAA,CAAAC,IAAA;QACArB,UAAA;UACA,KAAAsB,OAAA,CAAAC,IAAA;QACA;MACA;IACA;IACA,MAAAT,WAAA;MACAU,OAAA,CAAAC,GAAA,oBAAArB,UAAA;MACAoB,OAAA,CAAAC,GAAA,oBAAApB,UAAA;MAEA,SAAAD,UAAA,SAAAC,UAAA;QACAmB,OAAA,CAAAC,GAAA,oBAAApB,UAAA;QACA;UACA,MAAAqB,SAAA,SAAAC,OAAA,CAAAC,GAAA,MAAArB,OAAA,CAAAsB,GAAA,OAAAC,IAAA;YACA;cACA,aAAAjC,KAAA,CAAAkC,GAAA,CAAAD,IAAA;YACA,SAAAE,KAAA;cACAR,OAAA,CAAAQ,KAAA,MAAAF,IAAA,aAAAE,KAAA;cACA;YACA;UACA;UAEA,KAAA1B,QAAA,GAAAoB,SAAA,CAAAO,MAAA,CAAAC,QAAA;YACA,KAAAA,QAAA;YACA,MAAAC,IAAA,GAAAD,QAAA,CAAA/B,IAAA,CAAAgC,IAAA;YACA,MAAAC,IAAA,GAAAF,QAAA,CAAA/B,IAAA,CAAAiC,IAAA;;YAEA,MAAAC,WAAA,QAAAjC,UAAA,GACA+B,IAAA,IAAAA,IAAA,CAAAG,WAAA,GAAAC,QAAA,MAAAnC,UAAA,CAAAkC,WAAA,MACA;YAEA,MAAAE,WAAA,QAAAnC,UAAA,GACA+B,IAAA,IAAAA,IAAA,CAAAE,WAAA,GAAAC,QAAA,MAAAlC,UAAA,CAAAiC,WAAA,MACA;;YAEA;YACA,OAAAD,WAAA,IAAAG,WAAA;UACA,GAAAX,GAAA,CAAAK,QAAA,IAAAA,QAAA,CAAAO,MAAA,CAAAC,GAAA;UAEAlB,OAAA,CAAAC,GAAA,sBAAAnB,QAAA;QACA,SAAA0B,KAAA;UACAR,OAAA,CAAAQ,KAAA,0BAAAA,KAAA;QACA;MACA;QACA,KAAA1B,QAAA,QAAAC,OAAA;MACA;IACA;IACA,MAAAL,QAAA;MACA;QACA,KAAAK,OAAA,SAAAX,SAAA;QACA;QACA,KAAAU,QAAA,QAAAC,OAAA;MACA,SAAAoC,CAAA;QACAnB,OAAA,CAAAC,GAAA,CAAAkB,CAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}