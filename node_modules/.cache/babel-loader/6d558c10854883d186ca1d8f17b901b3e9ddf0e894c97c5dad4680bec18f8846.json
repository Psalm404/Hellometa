{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport getTokenIdbyURL from '@/commons/getTokenIdbyURL';\nimport getTokenPrice from '@/commons/getTokenPrice';\nexport default {\n  name: 'subInfo',\n  props: [\"fileURL\", \"source\"],\n  mounted() {\n    console.log('this.fileURL:', this.fileURL);\n    console.log('this.source', this.source);\n    this.fetchData();\n  },\n  watch: {\n    fileURL() {\n      this.fetchData();\n    }\n  },\n  data() {\n    return {\n      show: false,\n      picUrl: \"\",\n      searchName: '',\n      recordName: \"\",\n      recordDesc: \"\",\n      recordType: \"\",\n      recordPrice: null,\n      tokenID: \"\"\n    };\n  },\n  methods: {\n    async fetchData() {\n      try {\n        let response = await axios.get(this.fileURL);\n        let jsonData = response.data;\n        console.log(\"in subinfo\", jsonData);\n        this.recordName = jsonData.name;\n        this.recordDesc = jsonData.desc;\n        let tokenID = await getTokenIdbyURL(this.fileURL); //从url拿一次tokenid，再从tokenid拿价格\n        this.recordPrice = await getTokenPrice(tokenID);\n        // this.recordPrice = jsonData.price\n        if (jsonData.type == 'pic') {\n          this.recordType = '图片';\n          this.picUrl = jsonData.image;\n        } else {\n          this.recordType = '文本';\n          this.picUrl = require('@/assets/text.png');\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    },\n    toInfo() {\n      console.log('source', this.source);\n      if (this.source == 'exhibit') {\n        this.$router.push('/workInfo?jsonURL=' + this.fileURL);\n      } else if (this.source == \"record\") {\n        this.$router.push('/workDetails?jsonURL=' + this.fileURL); //路由传参\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","getTokenIdbyURL","getTokenPrice","name","props","mounted","console","log","fileURL","source","fetchData","watch","data","show","picUrl","searchName","recordName","recordDesc","recordType","recordPrice","tokenID","methods","response","get","jsonData","desc","type","image","require","e","toInfo","$router","push"],"sources":["src/components/subInfo.vue"],"sourcesContent":["<!-- 文件展示细节封装成单独的文件，exhibit和record共用一套逻辑 -->\n<template>\n<div>\n    <div class=\"grid-subitem\">\n        <div class=\"grid-item-top\">\n            <div class=\"grid-item-top-top\">\n                <div class=\"grid-item-top-left\">\n                    <div class=\"record-picture\">\n                        <el-avatar shape=\"square\" :size=\"115\" :src=\"picUrl\"></el-avatar>\n                    </div>\n                </div>\n                <div class=\"grid-item-top-right\">\n                    <div class=\"record-name\">\n                        <span class=\"record-name-title\">作品名称：</span>\n                        <span style=\"font-weight:bolder; display: block; align-self: self-start\">{{ recordName }}</span>\n                    </div>\n                    <div class=\"record-type\">\n                        <span>作品类别：{{ recordType }}</span>\n                    </div>\n                    <div v-if = \"recordPrice !== '0' && recordPrice !== 0 && recordPrice !== '0.'\" class=\"record-price\">\n                        <span>售价：{{ recordPrice }} eth</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"grid-item-top-bottom\">\n                <div class=\"record-desc\">\n                    <span>作品描述:</span>\n                    <span style=\"display:block; margin-top:5px; margin-left:15px; font-weight:bolder; font-size:small\">{{\n                    recordDesc }}</span>\n                </div>\n            </div>\n            \n        </div>\n        <div class=\"grid-item-bottom\">\n            <button @click=\"toInfo\">\n                查看凭证\n            </button>\n        </div>\n    </div>\n\n</div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport getTokenIdbyURL from '@/commons/getTokenIdbyURL'\nimport getTokenPrice from '@/commons/getTokenPrice'\nexport default {\n    name: 'subInfo',\n    props: [\"fileURL\", \"source\"],\n    mounted() {\n        console.log('this.fileURL:', this.fileURL)\n        console.log('this.source', this.source)\n        this.fetchData();\n    },\n    watch: {\n        fileURL() {\n            this.fetchData();\n        },\n    },\n    data() {\n        return {\n            show: false,\n            picUrl: \"\",\n            searchName: '',\n            recordName: \"\",\n            recordDesc: \"\",\n            recordType: \"\",\n            recordPrice:null,\n            tokenID:\"\",\n        };\n    },\n    methods: {\n        async fetchData() {\n            try {\n                let response = await axios.get(this.fileURL)\n                let jsonData = response.data\n                console.log(\"in subinfo\", jsonData)\n                this.recordName = jsonData.name\n                this.recordDesc = jsonData.desc\n                let tokenID = await getTokenIdbyURL(this.fileURL) //从url拿一次tokenid，再从tokenid拿价格\n                this.recordPrice = await getTokenPrice(tokenID)\n               // this.recordPrice = jsonData.price\n                if (jsonData.type == 'pic') {\n                    this.recordType = '图片'\n                    this.picUrl = jsonData.image\n                }else{\n                    this.recordType = '文本'\n                    this.picUrl = require('@/assets/text.png')\n                }\n            } catch (e) {\n                console.log(e)\n            }\n        },\n        toInfo() {\n            console.log('source', this.source)\n            if (this.source == 'exhibit') {\n                this.$router.push('/workInfo?jsonURL=' + this.fileURL);\n            } else if (this.source == \"record\") {\n                this.$router.push('/workDetails?jsonURL=' + this.fileURL); //路由传参\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n.grid-subitem {\n    padding: 15px;\n    height: 330px;\n    text-align: center;\n    display: flex;\n    flex-direction: column;\n}\n\n.grid-item-top {\n    flex: 5;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    /* border:1px solid red; */\n}\n\n.grid-item-top-top {\n    flex: 1;\n    display: flex;\n    gap: 10px;\n    /* border: 1px solid green; */\n}\n\n.grid-item-top-right {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    align-items: self-start;\n}\n\n.record-name {\n    margin-top: 10px;\n    text-align: left;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n}\n\n.record-type {\n    flex: 1;\n    align-self: self-start;\n}\n.record-price {\n    flex: 1;\n    align-self: self-start;\n}\n\n.grid-item-bottom .grid-item-top-left {\n    flex: 1;\n}\n\n.grid-item-top-bottom {\n    flex: 3;\n}\n\n.record-desc {\n    text-align: start;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 6;\n    -webkit-box-orient: vertical;\n}\n\n.grid-item-bottom button {\n    margin-top: 10px;\n    flex: 1;\n    border: 1px solid rgba(255, 87, 51, 1);\n    cursor: pointer;\n    width: 150px;\n    color: rgba(255, 87, 51, 0.8);\n    background-color: transparent;\n    border-radius: 5px;\n    height: 30px;\n    line-height: 30px;\n}\n</style>\n"],"mappings":";AA6CA,OAAAA,KAAA;AACA,OAAAC,eAAA;AACA,OAAAC,aAAA;AACA;EACAC,IAAA;EACAC,KAAA;EACAC,QAAA;IACAC,OAAA,CAAAC,GAAA,uBAAAC,OAAA;IACAF,OAAA,CAAAC,GAAA,qBAAAE,MAAA;IACA,KAAAC,SAAA;EACA;EACAC,KAAA;IACAH,QAAA;MACA,KAAAE,SAAA;IACA;EACA;EACAE,KAAA;IACA;MACAC,IAAA;MACAC,MAAA;MACAC,UAAA;MACAC,UAAA;MACAC,UAAA;MACAC,UAAA;MACAC,WAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAX,UAAA;MACA;QACA,IAAAY,QAAA,SAAAtB,KAAA,CAAAuB,GAAA,MAAAf,OAAA;QACA,IAAAgB,QAAA,GAAAF,QAAA,CAAAV,IAAA;QACAN,OAAA,CAAAC,GAAA,eAAAiB,QAAA;QACA,KAAAR,UAAA,GAAAQ,QAAA,CAAArB,IAAA;QACA,KAAAc,UAAA,GAAAO,QAAA,CAAAC,IAAA;QACA,IAAAL,OAAA,SAAAnB,eAAA,MAAAO,OAAA;QACA,KAAAW,WAAA,SAAAjB,aAAA,CAAAkB,OAAA;QACA;QACA,IAAAI,QAAA,CAAAE,IAAA;UACA,KAAAR,UAAA;UACA,KAAAJ,MAAA,GAAAU,QAAA,CAAAG,KAAA;QACA;UACA,KAAAT,UAAA;UACA,KAAAJ,MAAA,GAAAc,OAAA;QACA;MACA,SAAAC,CAAA;QACAvB,OAAA,CAAAC,GAAA,CAAAsB,CAAA;MACA;IACA;IACAC,OAAA;MACAxB,OAAA,CAAAC,GAAA,gBAAAE,MAAA;MACA,SAAAA,MAAA;QACA,KAAAsB,OAAA,CAAAC,IAAA,6BAAAxB,OAAA;MACA,gBAAAC,MAAA;QACA,KAAAsB,OAAA,CAAAC,IAAA,gCAAAxB,OAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}