{"ast":null,"code":"/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nexport var Eip6963EventName;\n(function (Eip6963EventName) {\n  Eip6963EventName[\"eip6963announceProvider\"] = \"eip6963:announceProvider\";\n  Eip6963EventName[\"eip6963requestProvider\"] = \"eip6963:requestProvider\";\n})(Eip6963EventName || (Eip6963EventName = {}));\nexport const eip6963ProvidersMap = new Map();\nexport const web3ProvidersMapUpdated = 'web3:providersMapUpdated';\nexport const requestEIP6963Providers = () => __awaiter(void 0, void 0, void 0, function* () {\n  return new Promise((resolve, reject) => {\n    if (typeof window === 'undefined') {\n      reject(new Error('window object not available, EIP-6963 is intended to be used within a browser'));\n    }\n    window.addEventListener(Eip6963EventName.eip6963announceProvider, event => {\n      eip6963ProvidersMap.set(event.detail.info.uuid, event.detail);\n      const newEvent = new CustomEvent(web3ProvidersMapUpdated, {\n        detail: eip6963ProvidersMap\n      });\n      window.dispatchEvent(newEvent);\n      resolve(eip6963ProvidersMap);\n    });\n    window.dispatchEvent(new Event(Eip6963EventName.eip6963requestProvider));\n  });\n});\nexport const onNewProviderDiscovered = callback => {\n  if (typeof window === 'undefined') {\n    throw new Error('window object not available, EIP-6963 is intended to be used within a browser');\n  }\n  window.addEventListener(web3ProvidersMapUpdated, callback);\n};","map":{"version":3,"names":["Eip6963EventName","eip6963ProvidersMap","Map","web3ProvidersMapUpdated","requestEIP6963Providers","__awaiter","Promise","resolve","reject","window","Error","addEventListener","eip6963announceProvider","event","set","detail","info","uuid","newEvent","CustomEvent","dispatchEvent","Event","eip6963requestProvider","onNewProviderDiscovered","callback"],"sources":["../../src/web3_eip6963.ts"],"sourcesContent":[null],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmBA,WAAYA,gBAGX;AAHD,WAAYA,gBAAgB;EAC3BA,gBAAA,wDAAoD;EACpDA,gBAAA,sDAAkD;AACnD,CAAC,EAHWA,gBAAgB,KAAhBA,gBAAgB;AA4B5B,OAAO,MAAMC,mBAAmB,GAA4B,IAAIC,GAAG,EAAE;AAErE,OAAO,MAAMC,uBAAuB,GAAG,0BAA0B;AAMjE,OAAO,MAAMC,uBAAuB,GAAGA,CAAA,KAA6CC,SAAA;EACnF,WAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAI;IAC/B,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;MAClCD,MAAM,CACL,IAAIE,KAAK,CACR,+EAA+E,CAC/E,CACD;;IAGFD,MAAM,CAACE,gBAAgB,CACtBX,gBAAgB,CAACY,uBAA8B,EAC9CC,KAAmC,IAAI;MACvCZ,mBAAmB,CAACa,GAAG,CAACD,KAAK,CAACE,MAAM,CAACC,IAAI,CAACC,IAAI,EAAEJ,KAAK,CAACE,MAAM,CAAC;MAE7D,MAAMG,QAAQ,GAAmC,IAAIC,WAAW,CAC/DhB,uBAAuB,EACvB;QAAEY,MAAM,EAAEd;MAAmB,CAAE,CAC/B;MAEDQ,MAAM,CAACW,aAAa,CAACF,QAAQ,CAAC;MAC9BX,OAAO,CAACN,mBAAmB,CAAC;IAC7B,CAAC,CACD;IAEDQ,MAAM,CAACW,aAAa,CAAC,IAAIC,KAAK,CAACrB,gBAAgB,CAACsB,sBAAsB,CAAC,CAAC;EACzE,CAAC,CAAC;EAAA;AAEH,OAAO,MAAMC,uBAAuB,GACnCC,QAAiE,IAC9D;EACH,IAAI,OAAOf,MAAM,KAAK,WAAW,EAAE;IAClC,MAAM,IAAIC,KAAK,CACd,+EAA+E,CAC/E;;EAEFD,MAAM,CAACE,gBAAgB,CAACR,uBAA8B,EAAEqB,QAAQ,CAAC;AAClE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}