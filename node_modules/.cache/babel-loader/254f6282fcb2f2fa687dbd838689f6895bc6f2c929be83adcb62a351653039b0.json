{"ast":null,"code":"/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\nimport { Web3Subscription } from 'web3-core';\nimport { decodeEventABI } from 'web3-eth';\n/**\n * LogSubscription to be used to subscribe to events logs.\n *\n * Following events are supported and can be accessed with either {@link LogsSubscription.once} or ${@link LogsSubscription.on} methods.\n *\n * - **connected**: Emitted when the subscription is connected.\n * - **data**: Fires on each incoming event with the event object as argument.\n * - **changed**: Fires on each event which was removed from the blockchain. The event will have the additional property `removed: true`.\n * - **error**: Fires on each error.\n *\n * ```ts\n * const subscription = await myContract.events.MyEvent({\n *   filter: {myIndexedParam: [20,23], myOtherIndexedParam: '0x123456789...'}, // Using an array means OR: e.g. 20 or 23\n *   fromBlock: 0\n * });\n *\n * subscription.on(\"connected\", function(subscriptionId){\n *   console.log(subscriptionId);\n * });\n *\n * subscription.on('data', function(event){\n *   console.log(event); // same results as the optional callback above\n * });\n *\n * subscription.on('changed', function(event){\n *   // remove event from local database\n * })\n *\n * subscription.on('error', function(error, receipt) { // If the transaction was rejected by the network with a receipt, the second parameter will be the receipt.\n *   ...\n * });\n *\n * // event output example\n * > {\n *   returnValues: {\n *       myIndexedParam: 20,\n *       myOtherIndexedParam: '0x123456789...',\n *       myNonIndexParam: 'My String'\n *   },\n *   raw: {\n *       data: '0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385',\n *       topics: ['0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7', '0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385']\n *   },\n *   event: 'MyEvent',\n *   signature: '0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7',\n *   logIndex: 0,\n *   transactionIndex: 0,\n *   transactionHash: '0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385',\n *   blockHash: '0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7',\n *   blockNumber: 1234,\n *   address: '0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe'\n * }\n * ```\n */\nexport class LogsSubscription extends Web3Subscription {\n  constructor(args, options) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    super(args, options);\n    this.address = args.address;\n    this.topics = args.topics;\n    this.abi = args.abi;\n    this.jsonInterface = args.jsonInterface;\n  }\n  _buildSubscriptionParams() {\n    return ['logs', {\n      address: this.address,\n      topics: this.topics\n    }];\n  }\n  formatSubscriptionResult(data) {\n    return decodeEventABI(this.abi, data, this.jsonInterface, super.returnFormat);\n  }\n}","map":{"version":3,"names":["Web3Subscription","decodeEventABI","LogsSubscription","constructor","args","options","address","topics","abi","jsonInterface","_buildSubscriptionParams","formatSubscriptionResult","data","returnFormat"],"sources":["../../src/log_subscription.ts"],"sourcesContent":[null],"mappings":"AAAA;;;;;;;;;;;;;;;;AA0BA,SAA6BA,gBAAgB,QAAiC,WAAW;AACzF,SAASC,cAAc,QAAQ,UAAU;AAEzC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA,OAAM,MAAOC,gBAAiB,SAAQF,gBAOrC;EA0CAG,YACCC,IAMC,EACDC,OAKC;IAED;IACA,KAAK,CAACD,IAAI,EAAEC,OAAc,CAAC;IAE3B,IAAI,CAACC,OAAO,GAAGF,IAAI,CAACE,OAAO;IAC3B,IAAI,CAACC,MAAM,GAAGH,IAAI,CAACG,MAAM;IACzB,IAAI,CAACC,GAAG,GAAGJ,IAAI,CAACI,GAAG;IACnB,IAAI,CAACC,aAAa,GAAGL,IAAI,CAACK,aAAa;EACxC;EAEUC,wBAAwBA,CAAA;IACjC,OAAO,CAAC,MAAM,EAAE;MAAEJ,OAAO,EAAE,IAAI,CAACA,OAAO;MAAEC,MAAM,EAAE,IAAI,CAACA;IAAM,CAAE,CAAC;EAChE;EAEUI,wBAAwBA,CAACC,IAAc;IAChD,OAAOX,cAAc,CAAC,IAAI,CAACO,GAAG,EAAEI,IAAiB,EAAE,IAAI,CAACH,aAAa,EAAE,KAAK,CAACI,YAAY,CAAC;EAC3F","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}