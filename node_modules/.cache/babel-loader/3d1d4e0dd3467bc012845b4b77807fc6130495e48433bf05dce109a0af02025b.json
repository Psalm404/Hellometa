{"ast":null,"code":"import contract from './contract';\nimport Web3 from 'web3';\nimport { getAccountAddr } from './getAccountAddr';\nasync function updateTokenPrice(tokenId, newPrice) {\n  try {\n    if (!contract) {\n      console.error('合约实例尚未初始化');\n      throw new Error('Contract not initialized');\n    }\n\n    // 合约调用者的地址\n    const addr = await getAccountAddr();\n    console.log(addr);\n    const newPriceWei = Web3.utils.toWei(newPrice, 'ether');\n    console.log('new', newPriceWei);\n    const transaction = await contract.methods.updateTokenPrice(tokenId, newPriceWei).send({\n      from: addr\n    });\n    console.log('代币价格修改成功');\n    return transaction;\n  } catch (error) {\n    console.error('代币价格修改失败', error);\n    throw error; // 重新抛出错误，以便在调用该函数时可以捕获并处理\n  }\n}\nexport default updateTokenPrice;","map":{"version":3,"names":["contract","Web3","getAccountAddr","updateTokenPrice","tokenId","newPrice","console","error","Error","addr","log","newPriceWei","utils","toWei","transaction","methods","send","from"],"sources":["D:/my-repo/hellometa/src/commons/updateTokenPrice.js"],"sourcesContent":["import contract from './contract';\r\nimport Web3 from 'web3';\r\nimport { getAccountAddr } from './getAccountAddr';\r\n\r\nasync function updateTokenPrice(tokenId, newPrice) {\r\n    try {\r\n        if (!contract) {\r\n            console.error('合约实例尚未初始化');\r\n            throw new Error('Contract not initialized');\r\n        }\r\n\r\n        // 合约调用者的地址\r\n        const addr = await getAccountAddr();\r\n        console.log(addr);\r\n\r\n        const newPriceWei = Web3.utils.toWei(newPrice, 'ether')\r\n        console.log('new',newPriceWei)\r\n        const transaction = await contract.methods.updateTokenPrice(tokenId, newPriceWei).send({ from: addr });\r\n        console.log('代币价格修改成功');\r\n        return transaction;\r\n    } catch (error) {\r\n        console.error('代币价格修改失败', error);\r\n        throw error; // 重新抛出错误，以便在调用该函数时可以捕获并处理\r\n    }\r\n}\r\n\r\nexport default updateTokenPrice;\r\n"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,YAAY;AACjC,OAAOC,IAAI,MAAM,MAAM;AACvB,SAASC,cAAc,QAAQ,kBAAkB;AAEjD,eAAeC,gBAAgBA,CAACC,OAAO,EAAEC,QAAQ,EAAE;EAC/C,IAAI;IACA,IAAI,CAACL,QAAQ,EAAE;MACXM,OAAO,CAACC,KAAK,CAAC,WAAW,CAAC;MAC1B,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;IAC/C;;IAEA;IACA,MAAMC,IAAI,GAAG,MAAMP,cAAc,CAAC,CAAC;IACnCI,OAAO,CAACI,GAAG,CAACD,IAAI,CAAC;IAEjB,MAAME,WAAW,GAAGV,IAAI,CAACW,KAAK,CAACC,KAAK,CAACR,QAAQ,EAAE,OAAO,CAAC;IACvDC,OAAO,CAACI,GAAG,CAAC,KAAK,EAACC,WAAW,CAAC;IAC9B,MAAMG,WAAW,GAAG,MAAMd,QAAQ,CAACe,OAAO,CAACZ,gBAAgB,CAACC,OAAO,EAAEO,WAAW,CAAC,CAACK,IAAI,CAAC;MAAEC,IAAI,EAAER;IAAK,CAAC,CAAC;IACtGH,OAAO,CAACI,GAAG,CAAC,UAAU,CAAC;IACvB,OAAOI,WAAW;EACtB,CAAC,CAAC,OAAOP,KAAK,EAAE;IACZD,OAAO,CAACC,KAAK,CAAC,UAAU,EAAEA,KAAK,CAAC;IAChC,MAAMA,KAAK,CAAC,CAAC;EACjB;AACJ;AAEA,eAAeJ,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}