{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport getTokenIdbyURL from '@/commons/getTokenIdbyURL';\nimport getTokenPrice from '@/commons/getTokenPrice';\nexport default {\n  name: 'subInfo',\n  props: [\"fileURL\", \"source\"],\n  mounted() {\n    console.log('this.fileURL:', this.fileURL);\n    console.log('this.source', this.source);\n    this.fetchData();\n  },\n  watch: {\n    fileURL() {\n      this.fetchData();\n    }\n  },\n  data() {\n    return {\n      show: false,\n      picUrl: \"\",\n      searchName: '',\n      recordName: \"\",\n      recordDesc: \"\",\n      recordType: \"\",\n      recordPrice: null,\n      tokenID: \"\"\n    };\n  },\n  methods: {\n    async fetchData() {\n      try {\n        let response = await axios.get(this.fileURL);\n        let jsonData = response.data;\n        console.log(\"in subinfo\", jsonData);\n        this.recordName = jsonData.name;\n        this.recordDesc = jsonData.desc;\n        let tokenID = await getTokenIdbyURL(this.fileURL); //从url拿一次tokenid，再从tokenid拿价格\n        this.recordPrice = await getTokenPrice(tokenID);\n        // this.recordPrice = jsonData.price\n        if (jsonData.type == 'pic') {\n          this.recordType = '图片';\n          this.picUrl = jsonData.image;\n        } else {\n          this.recordType = '文本';\n          this.picUrl = require('@/assets/text.png');\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    },\n    toInfo() {\n      console.log('source', this.source);\n      if (this.source == 'exhibit') {\n        this.$router.push('/workInfo?jsonURL=' + this.fileURL);\n      } else if (this.source == \"record\") {\n        this.$router.push('/workDetails?jsonURL=' + this.fileURL); //路由传参\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","getTokenIdbyURL","getTokenPrice","name","props","mounted","console","log","fileURL","source","fetchData","watch","data","show","picUrl","searchName","recordName","recordDesc","recordType","recordPrice","tokenID","methods","response","get","jsonData","desc","type","image","require","e","toInfo","$router","push"],"sources":["src/components/subInfo.vue"],"sourcesContent":["<!-- 文件展示细节封装成单独的文件，exhibit和record共用一套逻辑 -->\r\n<template>\r\n<div>\r\n    <div class=\"grid-subitem\">\r\n        <div class=\"grid-item-top\">\r\n            <div class=\"grid-item-top-top\">\r\n                <div class=\"grid-item-top-left\">\r\n                    <div class=\"record-picture\">\r\n                        <el-avatar shape=\"square\" :size=\"115\" :src=\"picUrl\"></el-avatar>\r\n                    </div>\r\n                </div>\r\n                <div class=\"grid-item-top-right\">\r\n                    <div class=\"record-name\">\r\n                        <span class=\"record-name-title\">作品名称：</span>\r\n                        <span style=\"font-weight:bolder; display: block; align-self: self-start\">{{ recordName }}</span>\r\n                    </div>\r\n                    <div class=\"record-type\">\r\n                        <span>作品类别：{{ recordType }}</span>\r\n                    </div>\r\n                    <div v-if = \"recordPrice !== '0' && recordPrice !== 0 && recordPrice !== '0.'\" class=\"record-price\">\r\n                        <span>售价：{{ recordPrice }} eth</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"grid-item-top-bottom\">\r\n                <div class=\"record-desc\">\r\n                    <span>作品描述:</span>\r\n                    <span style=\"display:block; margin-top:5px; margin-left:15px; font-weight:bolder; font-size:small\">{{\r\n                    recordDesc }}</span>\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n        <div class=\"grid-item-bottom\">\r\n            <button @click=\"toInfo\">\r\n                查看凭证\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport getTokenIdbyURL from '@/commons/getTokenIdbyURL'\r\nimport getTokenPrice from '@/commons/getTokenPrice'\r\nexport default {\r\n    name: 'subInfo',\r\n    props: [\"fileURL\", \"source\"],\r\n    mounted() {\r\n        console.log('this.fileURL:', this.fileURL)\r\n        console.log('this.source', this.source)\r\n        this.fetchData();\r\n    },\r\n    watch: {\r\n        fileURL() {\r\n            this.fetchData();\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            show: false,\r\n            picUrl: \"\",\r\n            searchName: '',\r\n            recordName: \"\",\r\n            recordDesc: \"\",\r\n            recordType: \"\",\r\n            recordPrice:null,\r\n            tokenID:\"\",\r\n        };\r\n    },\r\n    methods: {\r\n        async fetchData() {\r\n            try {\r\n                let response = await axios.get(this.fileURL)\r\n                let jsonData = response.data\r\n                console.log(\"in subinfo\", jsonData)\r\n                this.recordName = jsonData.name\r\n                this.recordDesc = jsonData.desc\r\n                let tokenID = await getTokenIdbyURL(this.fileURL) //从url拿一次tokenid，再从tokenid拿价格\r\n                this.recordPrice = await getTokenPrice(tokenID)\r\n               // this.recordPrice = jsonData.price\r\n                if (jsonData.type == 'pic') {\r\n                    this.recordType = '图片'\r\n                    this.picUrl = jsonData.image\r\n                }else{\r\n                    this.recordType = '文本'\r\n                    this.picUrl = require('@/assets/text.png')\r\n                }\r\n            } catch (e) {\r\n                console.log(e)\r\n            }\r\n        },\r\n        toInfo() {\r\n            console.log('source', this.source)\r\n            if (this.source == 'exhibit') {\r\n                this.$router.push('/workInfo?jsonURL=' + this.fileURL);\r\n            } else if (this.source == \"record\") {\r\n                this.$router.push('/workDetails?jsonURL=' + this.fileURL); //路由传参\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.grid-subitem {\r\n    padding: 15px;\r\n    height: 330px;\r\n    text-align: center;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.grid-item-top {\r\n    flex: 5;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 10px;\r\n    /* border:1px solid red; */\r\n}\r\n\r\n.grid-item-top-top {\r\n    flex: 1;\r\n    display: flex;\r\n    gap: 10px;\r\n    /* border: 1px solid green; */\r\n}\r\n\r\n.grid-item-top-right {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 10px;\r\n    align-items: self-start;\r\n}\r\n\r\n.record-name {\r\n    margin-top: 10px;\r\n    text-align: left;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 3;\r\n    -webkit-box-orient: vertical;\r\n}\r\n\r\n.record-type {\r\n    flex: 1;\r\n    align-self: self-start;\r\n}\r\n.record-price {\r\n    flex: 1;\r\n    align-self: self-start;\r\n}\r\n\r\n.grid-item-bottom .grid-item-top-left {\r\n    flex: 1;\r\n}\r\n\r\n.grid-item-top-bottom {\r\n    flex: 3;\r\n}\r\n\r\n.record-desc {\r\n    text-align: start;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 6;\r\n    -webkit-box-orient: vertical;\r\n}\r\n\r\n.grid-item-bottom button {\r\n    margin-top: 10px;\r\n    flex: 1;\r\n    border: 1px solid rgba(255, 87, 51, 1);\r\n    cursor: pointer;\r\n    width: 150px;\r\n    color: rgba(255, 87, 51, 0.8);\r\n    background-color: transparent;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    line-height: 30px;\r\n}\r\n</style>\r\n"],"mappings":";AA6CA,OAAAA,KAAA;AACA,OAAAC,eAAA;AACA,OAAAC,aAAA;AACA;EACAC,IAAA;EACAC,KAAA;EACAC,QAAA;IACAC,OAAA,CAAAC,GAAA,uBAAAC,OAAA;IACAF,OAAA,CAAAC,GAAA,qBAAAE,MAAA;IACA,KAAAC,SAAA;EACA;EACAC,KAAA;IACAH,QAAA;MACA,KAAAE,SAAA;IACA;EACA;EACAE,KAAA;IACA;MACAC,IAAA;MACAC,MAAA;MACAC,UAAA;MACAC,UAAA;MACAC,UAAA;MACAC,UAAA;MACAC,WAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACA,MAAAX,UAAA;MACA;QACA,IAAAY,QAAA,SAAAtB,KAAA,CAAAuB,GAAA,MAAAf,OAAA;QACA,IAAAgB,QAAA,GAAAF,QAAA,CAAAV,IAAA;QACAN,OAAA,CAAAC,GAAA,eAAAiB,QAAA;QACA,KAAAR,UAAA,GAAAQ,QAAA,CAAArB,IAAA;QACA,KAAAc,UAAA,GAAAO,QAAA,CAAAC,IAAA;QACA,IAAAL,OAAA,SAAAnB,eAAA,MAAAO,OAAA;QACA,KAAAW,WAAA,SAAAjB,aAAA,CAAAkB,OAAA;QACA;QACA,IAAAI,QAAA,CAAAE,IAAA;UACA,KAAAR,UAAA;UACA,KAAAJ,MAAA,GAAAU,QAAA,CAAAG,KAAA;QACA;UACA,KAAAT,UAAA;UACA,KAAAJ,MAAA,GAAAc,OAAA;QACA;MACA,SAAAC,CAAA;QACAvB,OAAA,CAAAC,GAAA,CAAAsB,CAAA;MACA;IACA;IACAC,OAAA;MACAxB,OAAA,CAAAC,GAAA,gBAAAE,MAAA;MACA,SAAAA,MAAA;QACA,KAAAsB,OAAA,CAAAC,IAAA,6BAAAxB,OAAA;MACA,gBAAAC,MAAA;QACA,KAAAsB,OAAA,CAAAC,IAAA,gCAAAxB,OAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}