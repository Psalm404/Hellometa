{"ast":null,"code":"/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\nimport { isAddress } from './address.js';\nimport { isBlockNumberOrTag } from './block.js';\nimport { isNullish } from './object.js';\nimport { isTopic } from './topic.js';\n/**\n * First we check if all properties in the provided value are expected,\n * then because all Filter properties are optional, we check if the expected properties\n * are defined. If defined and they're not the expected type, we immediately return false,\n * otherwise we return true after all checks pass.\n */\nexport const isFilterObject = value => {\n  const expectedFilterProperties = ['fromBlock', 'toBlock', 'address', 'topics', 'blockHash'];\n  if (isNullish(value) || typeof value !== 'object') return false;\n  if (!Object.keys(value).every(property => expectedFilterProperties.includes(property))) return false;\n  if (!isNullish(value.fromBlock) && !isBlockNumberOrTag(value.fromBlock) || !isNullish(value.toBlock) && !isBlockNumberOrTag(value.toBlock)) return false;\n  if (!isNullish(value.address)) {\n    if (Array.isArray(value.address)) {\n      if (!value.address.every(address => isAddress(address))) return false;\n    } else if (!isAddress(value.address)) return false;\n  }\n  if (!isNullish(value.topics)) {\n    if (!value.topics.every(topic => {\n      if (isNullish(topic)) return true;\n      if (Array.isArray(topic)) {\n        return topic.every(nestedTopic => isTopic(nestedTopic));\n      }\n      if (isTopic(topic)) return true;\n      return false;\n    })) return false;\n  }\n  return true;\n};","map":{"version":3,"names":["isAddress","isBlockNumberOrTag","isNullish","isTopic","isFilterObject","value","expectedFilterProperties","Object","keys","every","property","includes","fromBlock","toBlock","address","Array","isArray","topics","topic","nestedTopic"],"sources":["../../../src/validation/filter.ts"],"sourcesContent":[null],"mappings":"AAAA;;;;;;;;;;;;;;;;AAkBA,SAASA,SAAS,QAAQ,cAAc;AACxC,SAASC,kBAAkB,QAAQ,YAAY;AAC/C,SAASC,SAAS,QAAQ,aAAa;AACvC,SAASC,OAAO,QAAQ,YAAY;AAEpC;;;;;;AAMA,OAAO,MAAMC,cAAc,GAAIC,KAAa,IAAI;EAC/C,MAAMC,wBAAwB,GAAqB,CAClD,WAAW,EACX,SAAS,EACT,SAAS,EACT,QAAQ,EACR,WAAW,CACX;EACD,IAAIJ,SAAS,CAACG,KAAK,CAAC,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE,OAAO,KAAK;EAE/D,IACC,CAACE,MAAM,CAACC,IAAI,CAACH,KAAK,CAAC,CAACI,KAAK,CAACC,QAAQ,IACjCJ,wBAAwB,CAACK,QAAQ,CAACD,QAAwB,CAAC,CAC3D,EAED,OAAO,KAAK;EAEb,IACE,CAACR,SAAS,CAACG,KAAK,CAACO,SAAS,CAAC,IAAI,CAACX,kBAAkB,CAACI,KAAK,CAACO,SAAS,CAAC,IACnE,CAACV,SAAS,CAACG,KAAK,CAACQ,OAAO,CAAC,IAAI,CAACZ,kBAAkB,CAACI,KAAK,CAACQ,OAAO,CAAE,EAEjE,OAAO,KAAK;EAEb,IAAI,CAACX,SAAS,CAACG,KAAK,CAACS,OAAO,CAAC,EAAE;IAC9B,IAAIC,KAAK,CAACC,OAAO,CAACX,KAAK,CAACS,OAAO,CAAC,EAAE;MACjC,IAAI,CAACT,KAAK,CAACS,OAAO,CAACL,KAAK,CAACK,OAAO,IAAId,SAAS,CAACc,OAAO,CAAC,CAAC,EAAE,OAAO,KAAK;KACrE,MAAM,IAAI,CAACd,SAAS,CAACK,KAAK,CAACS,OAAO,CAAC,EAAE,OAAO,KAAK;;EAGnD,IAAI,CAACZ,SAAS,CAACG,KAAK,CAACY,MAAM,CAAC,EAAE;IAC7B,IACC,CAACZ,KAAK,CAACY,MAAM,CAACR,KAAK,CAACS,KAAK,IAAG;MAC3B,IAAIhB,SAAS,CAACgB,KAAK,CAAC,EAAE,OAAO,IAAI;MAEjC,IAAIH,KAAK,CAACC,OAAO,CAACE,KAAK,CAAC,EAAE;QACzB,OAAOA,KAAK,CAACT,KAAK,CAACU,WAAW,IAAIhB,OAAO,CAACgB,WAAW,CAAC,CAAC;;MAGxD,IAAIhB,OAAO,CAACe,KAAK,CAAC,EAAE,OAAO,IAAI;MAE/B,OAAO,KAAK;IACb,CAAC,CAAC,EAEF,OAAO,KAAK;;EAGd,OAAO,IAAI;AACZ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}